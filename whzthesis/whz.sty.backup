%%================================
%%       define colors          %%
%%==========================================================================

%\usepackage{color}
\RequirePackage{xcolor}
\input{dvipsnam.def}
\definecolor{lightgray}{gray}{0.9}
\definecolor{ListingBackground}{gray}{0.95}
\definecolor{LinkColorbookmarksnumbered}{rgb}{0.85,0.85,0.85}
%\definecolor{LinkColorbookmarksnumbered}{rgb}{0,0,0}

\definecolor{whzgray}{HTML}{C3C3C3}
\definecolor{whzred}{HTML}{983232}
\definecolor{whzblue}{HTML}{333366}


%%================================
%%       WHZ Logos 	        %%
%%==========================================================================
\newcommand{\whzlogoA}[1]
{
  \begin{minipage}{#1}
      \colorbox{whzblue}{\hspace*{0.67\textwidth}\color{whzblue}X}%
      \colorbox{whzgray}{\hspace*{0.12\textwidth}\color{whzgray}X}%
      \colorbox{whzred}{\hspace*{0.12\textwidth}\color{whzred}X}  
  \end{minipage}
}


%%========================================
%%      show german namestyle refs      %%
%%==========================================================================

%% show german namestyle refs 
%%------------------------------------------------------------
\RequirePackage{prettyref}
\RequirePackage{titleref}

%%% Für Kapitel %%%
\newrefformat{chap}{siehe Kapitel \ref{#1}, Seite \pageref{#1}}

%%% Für Abschnitte %%%
\newrefformat{sec}{siehe Abschnitt \ref{#1}, Seite \pageref{#1}}
%%% Für Abbildungen %%%
\newrefformat{fig}{siehe Abbildung \ref{#1}}
%%% Für Tabellen %%%
\newrefformat{tab}{siehe Tabelle \ref{#1}}
%%%% Für Listings %%%
\newrefformat{lst}{siehe Listing \ref{#1}}
%aufruf->kuerzer als \prettyref
\newcommand{\pref}[1]{\prettyref{#1}}
\newcommand{\siehe}[1]{\prettyref{#1}}

% 
%%========================================
%%          Language Settings           %%
%%======================================================================
\RequirePackage[german,ngerman,english]{babel}
% Hauptsprache einstellen (babel):
\RequirePackage{ifthen}
\@ifundefined{whz@MainLanguage}%
   {\newcommand*{\whz@MainLanguage}{german}}%
     {}
\ifthenelse{\equal{\whz@MainLanguage}{german}}%
    {\main@language{ngerman}}{}
\ifthenelse{\equal{}{english}}%
    {\main@language{english}}{}
\RequirePackage[fixlanguage]{babelbib}


\RequirePackage[german]{isodate}

% AMS-Math für mathematischen Schriftsatz
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amsbsy}
\RequirePackage{setspace}

\RequirePackage{verbatim}
\RequirePackage{moreverb}
\def\verbatimtabsize{2\relax}
\RequirePackage{eurosym} % provides \euro - conflict with marvosym on \EUR!

\RequirePackage{exscale}
% Skaliert Mathe-Modus Ausgaben in allen Umgebungen richtig.

\RequirePackage{upquote}
% Setzt "richtige" Quotes in verbatim-Umgebung

\RequirePackage{psfrag}
%%=================================================
%%       helpfull listing/code environments      %%
%%======================================================================

%% ------------- Algorithms Stuff ---------

% 'algorithm' liefert die Float-Umgebung für Algorithmen (\begin{algorithm}...)
\@ifundefined{chapter}%
  {\RequirePackage[ruled]{algorithm}}%
    {\RequirePackage[ruled,chapter]{algorithm}}
%\floatname{algorithm}{Algorithmus}
%\DeclareCaptionLabelSeparator{colon}{: } % Anpassung an den standard caption style
%\DeclareCaptionStyle{ruled}{labelfont=bf,labelsep=colon} 

% 'algorithmicx' liefert das Innere der Algorithmen (\begin{algorithmic}[1]...)
\RequirePackage{algorithmicx}
\RequirePackage{algpseudocode}
\algsetlanguage{pseudocode}
\renewcommand{\algorithmicprocedure}{} % use no 'Procedure' keyword
    
%% ------------- Program environment / code listings --------------

% define the program float environment:
\@ifundefined{chapter}%
   {\newfloat{program}{tbp}{lop}}%
     {\newfloat{program}{tbp}{lop}[chapter]}
%\floatname{program}{Programm}
%\floatname{program}{\@ProgramName}
\floatstyle{plain}
\restylefloat*{program}
    
\ifthenelse{\equal{\bbl@main@language}{german} \or \equal{\bbl@main@language}{ngerman}}%
{    \floatname{program}{Programm}
  \floatname{algorithm}{Algorithmus}
}{}

\ifthenelse{\equal{\bbl@main@language}{english}}%
{    \floatname{program}{Program}
  \floatname{algorithm}{Algorithm}
}{}


\color{black}
\newcommand{\@MissingArg}[1]{\textcolor{red}{#1}}

\RequirePackage{listings}
\RequirePackage{listingsutf8}

%%define lst colors
\definecolor{Gray}{gray}{.2}
\definecolor{lgray}{gray}{0.9}

%%Listing Setup
\lstset{
    frame              = trbl,
    xleftmargin        = 0pt,
    xrightmargin       = 0pt,
    aboveskip          = \bigskipamount,
    belowskip          = \bigskipamount,
    tabsize            = 2,
    captionpos         = b,
    basicstyle         = \footnotesize\ttfamily,
    numberstyle        = \color{Gray}\tiny,  
    numbers            = left,                 
    stepnumber         = 1,                    
    numbersep          = 10pt,                 
    postbreak          = \space,      % Bei Leerzeichen umbrechen.
    showspaces         = false,        % Leerzeichen nicht anzeigen.
    showstringspaces   = false,        % Spaces in Strings anzeigen 
    breaklines         = true,         % Zeilen umbrechen wenn notwendig.
    identifierstyle    = \ttfamily,%\color{Maroon}
    keywordstyle       = \ttfamily\bfseries\color{Maroon},
    stringstyle        = \ttfamily\color{NavyBlue},
    commentstyle       = \color{OliveGreen},
    rulecolor          = \color{lgray},
    backgroundcolor    = \color{ListingBackground},
%    extendedchars      = true,      % Alle Zeichen vom Latin1 Zeichensatz anzeigen.
}

%%JAVASCRIPT ENVIRONMENT
\lstdefinelanguage{JavaScript} {
    morekeywords={
        break,const,continue,delete,do,while,export,for,in,function,
        if,else,import,in,instanceOf,label,let,new,return,switch,this,
        throw,try,catch,typeof,var,void,with,yield
    },
    sensitive=false,
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[d]'
}
\lstnewenvironment{JSCode}    % code environment for Java 
{\lstset{%
    language=JavaScript,%
    %escapeinside={/+}{+/},% makes "/+" and "+/" available for Latex escapes (labels etc.)
    }}
{}


%%JAVA ENVIRONMENT
\lstnewenvironment{JavaCode}    % code environment for Java 
{\lstset{%
    language=Java,%
    %escapeinside={/+}{+/},% makes "/+" and "+/" available for Latex escapes (labels etc.)
    }}
{}

%%ANSI C ENVIRONMENT
\lstnewenvironment{CCode}    % code environment for C (ANSI)
{\lstset{%
    language=[ANSI]C,%
    %escapeinside={/+}{+/},% makes "/+" and "+/" available for Latex escapes (labels etc.)
    }}
{}

%%CPP ENVIRONMENT
\lstnewenvironment{CppCode}    % code environment for C++ (ISO)
{\lstset{%
    language=[ISO]C++,%
    %escapeinside={/+}{+/},% makes "/+" and "+/" available for Latex escapes (labels etc.)
    }}
{}

%%PHP ENVIRONMENT
\lstnewenvironment{PhpCode}
{\lstset{%
  language=PHP,%
%  mathescape=false,
  %escapeinside={/+}{+/}
    }}%
{}


\lstnewenvironment{LaTeXCode}    % code environment for Latex
{\lstset{%
    language=[LaTeX]TeX,%
    %commentstyle={},%
    %texcl=false,%
    %escapechar={},%
%    escapeinside={},%
    %escapeinside={/+}{+/}%
%    mathescape=false,
    }}
{}

\lstnewenvironment{GenericCode}    % generic code environment
{\lstset{%
    language={},%
    %keepspaces=true,%
    %commentstyle={},%
    %texcl=false,%
    %escapechar={},%
    %escapeinside={},%
%    mathescape=false,
    }}
{}

%% important: load this package after the listings package! 
\RequirePackage[dvips]{graphicx} % zur Einbindung von EPS-Grafiken



%%ADDITIONAL
\newcommand{\fitem}[2]{%
%\item[\url{#1}\hfill]
%\item[\url{#1}\dotfill]
\item[\href{#1}{#2}\widedotfill]
}

\newcommand{\Frametext}[1]{%
\setlength{\fboxrule}{0.05mm}%
\setlength{\fboxsep}{0.5mm}%
\fbox{\vphantom{Ag}#1}%
}

\newcommand{\FramePic}[1]{%
\setlength{\fboxrule}{0.1mm}%
\setlength{\fboxsep}{0mm}%
\fbox{#1}%
}


% Umschalten von Deutsch auf Englisch (babel)
\newenvironment{english}%
{\begin{otherlanguage}{english}}%
{\end{otherlanguage}}

\newenvironment{german}%
{\begin{otherlanguage}{ngerman}}%
{\end{otherlanguage}}


%%======================================
%%             short terms            %%
%%======================================================================
\RequirePackage{extramarks}
\RequirePackage{xspace}

\newcommand{\tex}{{\sl TeX}\xspace}       % kein schnoerkeliges TeX mehr
\newcommand{\latex}{{\rm \LaTeX}\xspace} % aus Bequemlichkeit


\newcommand{\bzgl}{bzgl.\@\xspace}
\newcommand{\bzw}{bzw.\@\xspace}
\newcommand{\ca}{ca.\@\xspace}
\newcommand{\dah}{d.\thinspace{}h.\@\xspace}
\newcommand{\Dah}{D.\thinspace{}h.\@\xspace}
\newcommand{\ds}{d.\thinspace{}sind\@\xspace}
\newcommand{\evtl}{evtl.\@\xspace}
\newcommand{\ia}{i.\thinspace{}Allg.\@\xspace}
\newcommand{\sa}{s.\ auch\@\xspace}
\newcommand{\so}{s.\ oben\xspace}
\newcommand{\su}{s.\ unten\@\xspace}

\newcommand{\ua}{u.\thinspace{}a.\@\xspace}
\newcommand{\Ua}{U.\thinspace{}a.\@\xspace}
\newcommand{\uae}{u.\thinspace{}Ä.\@\xspace}
\newcommand{\usw}{usw.\@\xspace}
\newcommand{\uva}{u.\thinspace{}v.\thinspace{}a.\@\xspace}
\newcommand{\uvm}{u.\thinspace{}v.\thinspace{}m.\@\xspace}
\newcommand{\va}{vor allem\@\xspace}
\newcommand{\vgl}{vgl.\@\xspace}
\newcommand{\zB}{z.\thinspace{}B.\@\xspace}
\newcommand{\ZB}{Zum Beispiel\xspace}

%Zeichen fuer die reellen, komplexen ... Zahlen (AMS Blackboard)
%\RequirePackage{amsfonts}
%\RequirePackage{amsbsy}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Q}{\mathbb{Q}}

%latex rewrite
\newcommand{\LATEX}{\latex}
%\renewcommand{\latex}{Latex}

%Messbox zur Druckkontrolle:
\newcommand{\Messbox}[2]{% Parameters: #1=Breite, #2=Hoehe
\setlength{\unitlength}{1.0mm}%
\begin{picture}(#1,#2)%
\linethickness{0.05mm}%
\put(0,0){\dashbox{0.2}(#1,#2)%
{\parbox{#1mm}{%
\centering\footnotesize 
%{\bf MESSBOX}\\ 
Breite $ = #1 {\rm\ mm}$\\
H\"ohe $ = #2 {\rm\ mm}$
}}}\end{picture}
}

%%=============================================
%%      some helpfull environments           %%
%%======================================================================

\newenvironment{NarrowList}%
{\begin{list}{}%
{\setlength{\leftmargin}{2.5em}
 \setlength{\labelwidth}{1em}
 \setlength{\labelsep}{0.5em}
 \setlength{\itemsep}{0.5ex}
 \setlength{\parsep}{0ex}
 \setlength{\topsep}{0ex}
\raggedright
}}%
{\end{list}}

\newenvironment{FileList}[1]%
{\paragraph{Pfad:} \url{#1}
 \begin{list}{}%
{\setlength{\leftmargin}{5cm}
 \setlength{\labelwidth}{4cm}
 \setlength{\labelsep}{0.25cm}
 \setlength{\rightmargin}{0cm}
 \setlength{\itemindent}{0cm}
 \setlength{\itemsep}{0.5ex}
 \setlength{\parsep}{0ex}
 \setlength{\topsep}{1ex}
\raggedright
}}%
{\end{list}}

\def\widedotfill{\leaders\hbox to 8pt{\hfil.\hfil}\hfill}

\renewcommand{\fitem}[2]{%
%\item[\url{#1}\hfill]
%\item[\url{#1}\dotfill]
\item[\href{#1}{#2}\widedotfill]
}

\renewcommand{\Frametext}[1]{%
\setlength{\fboxrule}{0.05mm}%
\setlength{\fboxsep}{0.5mm}%
\fbox{\vphantom{Ag}#1}%
}

\renewcommand{\FramePic}[1]{%
\setlength{\fboxrule}{0.1mm}%
\setlength{\fboxsep}{0mm}%
\fbox{#1}%
}

% Erzeugt einen neuen, nicht eingerückten Absatz
% mit zusätzlichem Abstand:
\newcommand{\SuperPar}[0]{% 
\par\bigskip\noindent%
}

%anfuehrungszeichen de
\newcommand{\qde}[1]{\glqq#1\grqq}
%\newcommand{\qde}[1]{"`#1"'}


%%%% TODO-PACKAGE %%%%
\RequirePackage{todonotes}
\reversemarginpar

%nummierte todos:
\newcounter{todocnt}\setcounter{todocnt}{0}
\newcommand{\todonum}[2][]{\stepcounter{todocnt}\todo[#1]{\thetodocnt: #2}}

%gelbe todo notizen:
\newcommand{\mynote}[1]{\todonum[color=yellow, size=\small, inline]{#1}}
\newcommand{\leftnote}[1]{\todonum[color=yellow, size=\small, linecolor=gray]{#1}}


%%% THESEN-MAKROS %%%
\newcounter{cntthesen}
\newcommand{\these}[1]{\stepcounter{cntthesen}\textbf{\Roman{cntthesen}}: #1 \\}